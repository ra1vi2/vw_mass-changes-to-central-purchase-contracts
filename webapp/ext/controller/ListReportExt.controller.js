/*
 * Copyright (C) 2009-2021 SAP SE or an SAP affiliate company. All rights reserved.
 */
sap.ui.define(["sap/m/MessageToast","sap/ui/model/json/JSONModel","sap/m/MessageBox","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/model/Sorter","ui/s2p/mm/cntrl/ctrmass/update/ext/model/formatter","ui/s2p/mm/cntrl/ctrmass/update/ext/controller/AddDistribution","ui/s2p/mm/cntrl/ctrmass/update/ext/controller/AddHCTRDistribution","ui/s2p/mm/cntrl/ctrmass/update/ext/controller/ExcelOperations"],function(M,J,a,F,b,S,c,A,d,E){"use strict";return sap.ui.controller("ui.s2p.mm.cntrl.ctrmass.update.ext.controller.ListReportExt",{formatter:c,AddDistribution:A,AddHCTRDistribution:d,ExcelOperations:E,oHeaderDistributionFilters:[],oItemDistributionFilters:[],oPOInclExclFilters:[],distarrayfil:[],oSmTableInnerTab1:undefined,oSmTableInnerTab2:undefined,oSmFilter:undefined,isSelectAllTab1:false,isExclusionTab1:false,isInclusionTab1:false,exclusionArrayTab1:[],inclusionArrayTab1:[],isSelectAllTab2:false,isExclusionTab2:false,isInclusionTab2:false,exclusionArrayTab2:[],inclusionArrayTab2:[],oSmTableInnerTab3:undefined,isSelectAllTab3:false,isExclusionTab3:false,isInclusionTab3:false,exclusionArrayTab3:[],inclusionArrayTab3:[],oSmTableInnerTab4:undefined,isSelectAllTab4:false,isExclusionTab4:false,isInclusionTab4:false,exclusionArrayTab4:[],inclusionArrayTab4:[],subObjectType:'C',excelUploadType:"",excelUploadTypeText:"",massEditChangeFields:[],aFilter:[],HeaderDistArray:[],countHeaderDist:undefined,ItemDistArray:[],countItemDist:undefined,applyChangeCntrlId:undefined,applychangesIndicator:undefined,SimulateToggleStatus:false,isSimulation:false,massUpdateHctrToggleStatus:false,onInit:function(){this.MandateFieldChanged=[];this.nonMandateFieldChanged=[];this.DocumentCategory="";this.fieldbeingChanged="";this.companyCodeChanged="";this.fieldLength="";this.ProcurementHubSourceSystem="";this.ValueStateErrorFields=[];this.PlantChanged="";this.oSmFilter=this.getView().byId("listReportFilter");this.oSmFilter.setUseDateRangeType(true);this.oSmTableTab1=this.getView().byId("listReport-_tab1");this.oSmTableTab1.setUseExportToExcel(true);this.oSmTableInnerTab1=this.oSmTableTab1.getTable();this.oSmTableInnerTab1.setMode("MultiSelect");this.oSmTableTab1.setIgnoredFields("CntrlPurContrItmDistrPct,Material,MaterialGroup,ProductType,ProductTypeCode,CntrlPurContrDistributionPct,ProcmtHubPurchasingOrg,ProcmtHubPurchasingGroup,"+"ProcmtHubCompanyCode,Plant,PurchasingProcessingStatus,CntrlPurContrFlxblDistrIsAllwd,CntrlPurContrOvrlDistrStsTxt,PurgDocNoteText");this.oSmTableInnerTab1.attachSelectionChange(this._onTable1RowSelection1.bind(this));this.oSmTableInnerTab1.attachUpdateFinished(this._handleGrowing.bind(this));this.oSmTableTab2=this.getView().byId("listReport-_tab2");this.oSmTableTab2.setUseExportToExcel(true);this.oSmTableTab2.setIgnoredFields("CntrlPurContrItmDistrPct,CntrlPurContrDistributionPct,ProcmtHubPurchasingOrg,ProcmtHubPurchasingGroup,ProcmtHubCompanyCode,"+"Plant,CashDiscount2Percent,NetPaymentDays,PurchasingOrganization,PurchasingGroup,CompanyCode,PurchasingDocumentStatus,"+"CashDiscount1Percent,CashDiscount2Days,PurchasingProcessingStatus,ItemDistributionStatusName,CashDiscount1Days,IncotermsClassification,"+"IncotermsLocation1,IncotermsLocation2,IncotermsVersion,QuotationSubmissionDate,SupplierQuotation,CorrespncExternalReference,"+"CorrespncInternalReference,PaymentTerms,SupplierRespSalesPersonName,CashDiscount2Days,Supplier,SupplierPhoneNumber,ValidityEndDate,"+"PurchaseContractTargetAmount,CntrlPurContrFlxblDistrIsAllwd,PurchaseContractType,ValidityStartDate,ValidityEndDate,DocumentCurrency,PurgDocNoteText,PurchasingDocVersionReasonCode");this.oSmTableInnerTab2=this.oSmTableTab2.getTable();this.oSmTableTab1.setRequestAtLeastFields("ActivePurchasingDocument");this.oSmTableTab2.setRequestAtLeastFields("ActivePurchasingDocument,FormattedPurchaseContractItem,CentralPurchaseContractItem");this.oSmTableInnerTab2.setMode("MultiSelect");this.oSmTableInnerTab2.attachSelectionChange(this._onTable2RowSelection1.bind(this));this.oSmTableInnerTab2.attachUpdateFinished(this._handleGrowing.bind(this));this.oSmTableTab1.attachBeforeRebindTable(this.resetTables.bind(this));this.oSmTableTab2.attachBeforeRebindTable(this.resetTables.bind(this));this.oIconTabBar=this.getView().byId("ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--template::IconTabBar");this.oSmFilter.attachSearch(this.resetTables.bind(this));this.oSmTableTab3=this.getView().byId("listReport-_tab3");this.oSmTableInnerTab3=this.oSmTableTab3.getTable();this.oSmTableInnerTab3.setMode("MultiSelect");this.oSmTableTab3.setIgnoredFields("CntrlPurContrItmDistrPct,Material,MaterialGroup,ProductType,ProductTypeCode,CntrlPurContrDistributionPct,ProcmtHubPurchasingOrg,ProcmtHubPurchasingGroup,"+"ProcmtHubCompanyCode,Plant,PurchasingProcessingStatus,CntrlPurContrFlxblDistrIsAllwd,CntrlPurContrOvrlDistrStsTxt,PurgDocNoteText");this.oSmTableTab4=this.getView().byId("listReport-_tab4");this.oSmTableInnerTab4=this.oSmTableTab4.getTable();this.oSmTableInnerTab4.setMode("MultiSelect");this.oSmTableTab4.setIgnoredFields("CntrlPurContrItmDistrPct,CntrlPurContrDistributionPct,ProcmtHubPurchasingOrg,ProcmtHubPurchasingGroup,ProcmtHubCompanyCode,"+"Plant,CashDiscount2Percent,NetPaymentDays,PurchasingOrganization,PurchasingGroup,CompanyCode,PurchasingDocumentStatus,"+"CashDiscount1Percent,CashDiscount2Days,PurchasingProcessingStatus,ItemDistributionStatusName,CashDiscount1Days,IncotermsClassification,"+"IncotermsLocation1,IncotermsLocation2,IncotermsVersion,QuotationSubmissionDate,SupplierQuotation,CorrespncExternalReference,"+"CorrespncInternalReference,PaymentTerms,SupplierRespSalesPersonName,CashDiscount2Days,Supplier,SupplierPhoneNumber,ValidityEndDate,"+"PurchaseContractTargetAmount,CntrlPurContrFlxblDistrIsAllwd,PurchaseContractType,ValidityStartDate,ValidityEndDate,DocumentCurrency,PurgDocNoteText,PurchasingDocVersionReasonCode");this.oIconTabBar.attachSelect(this.handleTabChange.bind(this));this.oSmTableInnerTab3.attachSelectionChange(this._onTable3RowSelection1.bind(this));this.oSmTableInnerTab3.attachUpdateFinished(this._handleGrowing.bind(this));this.oSmTableInnerTab4.attachSelectionChange(this._onTable4RowSelection1.bind(this));this.oSmTableInnerTab4.attachUpdateFinished(this._handleGrowing.bind(this));this.oSmTableTab3.attachBeforeRebindTable(this.resetTables.bind(this));this.oSmTableTab4.attachBeforeRebindTable(this.resetTables.bind(this));},enableHCTRfunctionality:function(){this.setHierarchyTabsVisibility(true);this.getView().byId("ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--action::ActionExcelDownload").setVisible(false);this.addUploadMenuButton();},enableSimulationFeature:function(){this.getView().byId("simulateJobButton").setVisible(true);},setHierarchyTabsVisibility:function(f){var v=this.getView();var h=v.byId("ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--template::IconTabFilter-_tab3");var e=v.byId("ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--template::IconTabFilter-_tab4");h.setVisible(f);e.setVisible(f);},validatePurchaserNote:function(e){var P=this.getView().byId("PurgDocNoteTextFld-SmartField-input");if(P.getValue().length>5000){P.setValueState("Error");P.setValueStateText(this.oBundleText.getText("PurchaserNoteMaxLength"));this.getView().byId("applyChangesButton").setEnabled(false);this.ErrInPurchaserNote=true;}else{P.setValueState("None");P.setValueStateText("");this.getView().byId("applyChangesButton").setEnabled(true);this.ErrInPurchaserNote=false;}},changeModel:function(i){var t=this;var e;var n;if(i===false){if(t.subObjectType==="C"){e=t.oBundleText.getText("applyChangesConfirmation");}else if(t.subObjectType==="H"){e=t.oBundleText.getText("applyChangesConfirmationHCTR");}n=new J({buttonId:"updateJobConfirmationBtn",dialogTitle:t.oBundleText.getText("applyChangesConfTitle"),Confirmation:e,JobDescription:t.oBundleText.getText("massJobDescription"),CommentBox:t.oBundleText.getText("massChangeJobCommentBox"),buttonTxt:t.oBundleText.getText("applyChangesConfirmationApply")});}else if(i===true){if(t.subObjectType==="C"){e=t.oBundleText.getText("simulateChangesConfirmation");}else if(t.subObjectType==="H"){e=t.oBundleText.getText("simulateChangesConfirmationHCTR");}n=new J({buttonId:"simulateJobConfirmationBtn",dialogTitle:t.oBundleText.getText("simulateConfTitle"),Confirmation:e,JobDescription:t.oBundleText.getText("simulateJobDescription"),CommentBox:t.oBundleText.getText("simulateJobCommentBox"),buttonTxt:t.oBundleText.getText("simulateJobConfirmationSimulate")});}return n;},setViewModelHeader:function(i,e){this.getView().getModel().setHeaders({"MassAddition":i,"Simulation":e});},createApplyChangesPopUp:function(e){var t=this;var f;var m;var g;this.applyChangeCntrlId="";if(e.getId()==="press"){if(e.getSource().getId()==="ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--DialogApplyBtn"){m=this.changeModel(false);}else if(e.getSource().getId()==="ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--DialogSimulateBtn"){this.isSimulation=true;m=this.changeModel(true);}if(e.getSource()&&e.getSource().getParent()){if(e.getSource().getParent().getId().search("AddHeaderDistribution")>-1){this.applyChangeCntrlId="AddHeaderDistribution";g=m.getData().Confirmation+"\n\n"+m.getData().JobDescription;}else if(e.getSource().getParent().getId().search("AddItemDistribution")>-1){this.applyChangeCntrlId="AddItemDistribution";g=m.getData().Confirmation+"\n\n"+m.getData().JobDescription;}else if(e.getSource().getParent().getId().search("AddHCTRItemDistribution")>-1){this.applyChangeCntrlId="AddHCTRItemDistribution";g=m.getData().Confirmation+"\n\n"+m.getData().JobDescription;}else if(e.getSource().getParent().getId().search("AddHCTRHeaderDistribution")>-1){this.applyChangeCntrlId="AddHCTRHeaderDistribution";g=m.getData().Confirmation+"\n\n"+m.getData().JobDescription;}}}else if(e.getId()==="ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--MassEditForm"){m=this.changeModel(this.isSimulation);this.applyChangeCntrlId="";g=m.getData().Confirmation+"\n\n"+m.getData().JobDescription;}else if(e.getId()==="ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--HrMassEditForm"){m=this.changeModel(this.isSimulation);this.applyChangeCntrlId="";g=m.getData().Confirmation+"\n\n"+m.getData().JobDescription;}var h=new sap.m.Dialog({title:m.getData().dialogTitle,type:"Message",content:[new sap.ui.layout.VerticalLayout({width:"100%",content:[new sap.m.Text("confirmationDialogText",{text:g}),new sap.m.TextArea("confirmDialogTextarea",{ariaLabelledBy:"confirmationDialogText",width:"100%",value:m.getData().CommentBox,maxLength:120})]})],beginButton:new sap.m.Button(m.getData().buttonId,{text:m.getData().buttonTxt,press:function(){var C=sap.ui.getCore().byId("confirmDialogTextarea").getValue();if(C===""){C=t.oBundleText.getText("MassChangeJobDefaultDescription");}t.applyChanges(C,e,t.applyChangeCntrlId);if(t.getView().byId("MassEditForm")){t.resetSetNewValuesForm("MassEditForm-item--Form","MassEditForm");t.onMassEditDialogClose("MassEditForm");t.getView().byId("MassEditForm").close();t.getView().byId("MassEditForm").destroy();}if(t.getView().byId("HrMassEditForm")){t.resetSetNewValuesForm("HrMassEditForm-item--Form","HrMassEditForm");t.onMassEditDialogClose("HrMassEditForm");t.getView().byId("HrMassEditForm").close();t.getView().byId("HrMassEditForm").destroy();}else if(t.getView().byId("AddHeaderDistribution")){f=t.AddDistribution.onAddHeaderDistDialogClose.bind(t,"AddHeaderDistribution");f();t.getView().byId("AddHeaderDistribution").close();t.getView().byId("AddHeaderDistribution").destroy();}else if(t.getView().byId("AddItemDistribution")){f=t.AddDistribution.onAddHeaderDistDialogClose.bind(t,"AddItemDistribution");f();t.getView().byId("AddItemDistribution").close();t.getView().byId("AddItemDistribution").destroy();}else if(t.getView().byId("AddHCTRItemDistribution")){f=t.AddDistribution.onAddHeaderDistDialogClose.bind(t,"AddHCTRItemDistribution");f();t.getView().byId("AddHCTRItemDistribution").close();t.getView().byId("AddHCTRItemDistribution").destroy();}else if(t.getView().byId("AddHCTRHeaderDistribution")){f=t.AddDistribution.onAddHeaderDistDialogClose.bind(t,"AddHCTRHeaderDistribution");f();t.getView().byId("AddHCTRHeaderDistribution").close();t.getView().byId("AddHCTRHeaderDistribution").destroy();}h.close();sap.ui.core.BusyIndicator.show(5);},type:"Emphasized"}),endButton:new sap.m.Button({text:t.oBundleText.getText("cancelButtonText"),press:function(){h.close();}}),afterClose:function(){h.destroy();}});h.open();sap.ui.getCore().byId("confirmDialogTextarea").attachLiveChange(function(i){if(i.getParameter("value")===""){if(m.getData().buttonId==="updateJobConfirmationBtn"){sap.ui.getCore().byId("updateJobConfirmationBtn").setEnabled(false);}else if(m.getData().buttonId==="simulateJobConfirmationBtn"){sap.ui.getCore().byId("simulateJobConfirmationBtn").setEnabled(false);}}else{if(m.getData().buttonId==="updateJobConfirmationBtn"){sap.ui.getCore().byId("updateJobConfirmationBtn").setEnabled(true);}else if(m.getData().buttonId==="simulateJobConfirmationBtn"){sap.ui.getCore().byId("simulateJobConfirmationBtn").setEnabled(true);}}});},onAfterRendering:function(e){var t=this;var v=this.getView();this.oBundleText=v.getModel("@i18n").getResourceBundle();var m=v.byId("ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--action::ActionC_PurCntrlContrItmMassUpdt1button");m.setEnabled(false);var o=new sap.m.MenuButton({"id":"MassAdditionBtn","enabled":false,"menu":new sap.m.Menu({items:[new sap.m.MenuItem({id:"AddHdrDistBtn","enabled":false}),new sap.m.MenuItem({id:"AddItmDistBtn","enabled":false})],"itemSelected":function(s){var I=s.getParameter("item");if(I&&I.getId()==="AddHdrDistBtn"){if(t.subObjectType==='C'){var j=t.AddDistribution.onPressAddHdrDist.bind(t);}else if(t.subObjectType==='H'){j=t.AddHCTRDistribution.onPressAddHdrDist.bind(t);}j();}else if(I&&I.getId()==="AddItmDistBtn"){if(t.subObjectType==='C'){var k=t.AddDistribution.onPressAddItmDist.bind(t);}else if(t.subObjectType==='H'){k=t.AddHCTRDistribution.onPressAddItmDist.bind(t);}k();}}})});this.overFlowToolBar=sap.ui.getCore().byId("ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--template:::ListReportPage:::DynamicPageTitle-_actionsToolbar");var i=this.overFlowToolBar.getContent().length-2;o.placeAt(this.overFlowToolBar,i);sap.ui.getCore().byId("MassAdditionBtn").setText(this.oBundleText.getText("MassAction"));sap.ui.getCore().byId("MassAdditionBtn").setTooltip(this.oBundleText.getText("MassAction"));sap.ui.getCore().byId("AddHdrDistBtn").setText(this.oBundleText.getText("AddHdrDist"));sap.ui.getCore().byId("AddHdrDistBtn").setTooltip(this.oBundleText.getText("AddHdrDist"));sap.ui.getCore().byId("AddItmDistBtn").setText(this.oBundleText.getText("AddItmDist"));sap.ui.getCore().byId("AddItmDistBtn").setTooltip(this.oBundleText.getText("AddItmDist"));v.byId("ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--addEntry-_tab1").setVisible(false);v.byId("ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--addEntry-_tab2").setVisible(false);v.byId("ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--addEntry-_tab3").setVisible(false);v.byId("ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--addEntry-_tab4").setVisible(false);v.byId("ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--ActionC_CntrlPurContrHdrDistrbutton-_tab2").setVisible(false);v.byId("ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--ActionC_CntrlPurContrHdrDistrbutton-_tab3").setVisible(false);v.byId("ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--ActionC_CntrlPurContrHdrDistrbutton-_tab4").setVisible(false);v.byId("ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--ActionC_CntrlPurContrItmDistrbutton-_tab1").setVisible(false);v.byId("ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--ActionC_CntrlPurContrItmDistrbutton-_tab3").setVisible(false);v.byId("ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--ActionC_CntrlPurContrItmDistrbutton-_tab4").setVisible(false);v.byId("ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--ActionC_CntrlPurContrHierHdrDistrbutton-_tab2").setVisible(false);v.byId("ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--ActionC_CntrlPurContrHierHdrDistrbutton-_tab1").setVisible(false);v.byId("ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--ActionC_CntrlPurContrHierHdrDistrbutton-_tab4").setVisible(false);v.byId("ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--ActionC_CntrlPurContrHierItmDistrbutton-_tab1").setVisible(false);v.byId("ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--ActionC_CntrlPurContrHierItmDistrbutton-_tab2").setVisible(false);v.byId("ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--ActionC_CntrlPurContrHierItmDistrbutton-_tab3").setVisible(false);v.byId("ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--ActionC_CntrlPurContrHdrDistrbutton-_tab1").setTooltip(this.oBundleText.getText("ActionC_CntrlPurContrHdrDistrbutton"));v.byId("ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--ActionC_CntrlPurContrItmDistrbutton-_tab2").setTooltip(this.oBundleText.getText("ActionC_CntrlPurContrItmDistrbutton"));v.byId("ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--ActionC_CntrlPurContrHierHdrDistrbutton-_tab3").setTooltip(this.oBundleText.getText("ActionC_CntrlPurContrHierHdrDistrbutton"));v.byId("ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--action::ActionC_PurCntrlContrItmMassUpdt2button").setTooltip(this.oBundleText.getText("GlobalActionMassChangeJob"));var f=v.byId("action::ActionExcelDownload");f.setTooltip(this.oBundleText.getText("ActionExcelDownload"));f.setEnabled(false);f.attachPress(this.ExcelOperations.OnClickExcelDownload,this);this.getView().getModel().attachRequestCompleted(this.ExcelOperations.fnDownloadButtonEnableDisable.bind(this));var g=new sap.m.MenuButton({"id":"downloadBtn","enabled":false,"menu":new sap.m.Menu({items:[new sap.m.MenuItem({id:"downloadCctrBtn","enabled":false}),new sap.m.MenuItem({id:"downloadHctrBtn","enabled":false})],"itemSelected":function(s){var I=s.getParameter("item");if(I&&I.getId()==="downloadCctrBtn"){var j=t.ExcelOperations.OnClickExcelDownload.bind(t);j();}else if(I&&I.getId()==="downloadHctrBtn"){var k=t.ExcelOperations.OnClickHctrExcelDownload.bind(t);k();}}})});this.getView().getModel().attachRequestCompleted(this.ExcelOperations.fnDownloadButtonEnableDisable.bind(this));this.overFlowToolBar=sap.ui.getCore().byId("ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--template:::ListReportPage:::DynamicPageTitle-_actionsToolbar");var h=this.overFlowToolBar.getContent().length-3;g.placeAt(this.overFlowToolBar,h);sap.ui.getCore().byId("downloadBtn").setText(this.oBundleText.getText("download"));sap.ui.getCore().byId("downloadBtn").setTooltip(this.oBundleText.getText("download"));sap.ui.getCore().byId("downloadCctrBtn").setText(this.oBundleText.getText("downloadCctr"));sap.ui.getCore().byId("downloadCctrBtn").setTooltip(this.oBundleText.getText("downloadCctr"));sap.ui.getCore().byId("downloadHctrBtn").setText(this.oBundleText.getText("downloadHctr"));sap.ui.getCore().byId("downloadHctrBtn").setTooltip(this.oBundleText.getText("downloadHctr"));this.enableHCTRfunctionality();},addUploadButton:function(e){var v=this.getView();var u=v.byId("FileUploader");if(!u){u=sap.ui.xmlfragment(v.getId(),"ui.s2p.mm.cntrl.ctrmass.update.ext.fragment.UploadExcel",this);v.addDependent(u);}var t=this.overFlowToolBar.getContent().length;var U=0;for(var f=0;f<t;f++){if(this.overFlowToolBar.getContent()[f].getId().search("ActionExcelDownload")>=0){U=f+1;break;}}u.placeAt(this.overFlowToolBar,U);},addUploadMenuButton:function(e){var t=this;var u=new sap.m.MenuButton({"id":"uploadBtn","enabled":true,"menu":new sap.m.Menu({items:[new sap.m.MenuItem({id:"uploadCctrBtn","enabled":true}),new sap.m.MenuItem({id:"uploadHctrBtn","enabled":true})],"itemSelected":function(s){t.excelUploadType="";var i=s.getParameter("item");if(i&&i.getId()==="uploadCctrBtn"){t.excelUploadType="EXL_OPS_CCTR";t.excelUploadTypeText=t.oBundleText.getText("excelBsdUploadCctrDialogTitle");var h=t.ExcelOperations.fnOpenExcelUploadModel.bind(t);h();}else if(i&&i.getId()==="uploadHctrBtn"){t.excelUploadType="EXL_OPS_HCTR";t.excelUploadTypeText=t.oBundleText.getText("excelBsdUploadHctrDialogTitle");var j=t.ExcelOperations.fnOpenExcelUploadModel.bind(t);j();}}})});var f=this.overFlowToolBar.getContent().length;var U=0;for(var g=0;g<f;g++){if(this.overFlowToolBar.getContent()[g].getId().search("ActionExcelDownload")>=0){U=g+2;break;}}u.placeAt(this.overFlowToolBar,U);sap.ui.getCore().byId("uploadBtn").setText(this.oBundleText.getText("upload"));sap.ui.getCore().byId("uploadBtn").setTooltip(this.oBundleText.getText("upload"));sap.ui.getCore().byId("uploadCctrBtn").setText(this.oBundleText.getText("uploadCctr"));sap.ui.getCore().byId("uploadCctrBtn").setTooltip(this.oBundleText.getText("uploadCctr"));sap.ui.getCore().byId("uploadHctrBtn").setText(this.oBundleText.getText("uploadHctr"));sap.ui.getCore().byId("uploadHctrBtn").setTooltip(this.oBundleText.getText("uploadHctr"));},hideHierItmDistrBtn:function(e){var v=this.getView();var I="ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--ActionC_CntrlPurContrHierItmDistrbutton";var T=I+"-_tab1";var f=I+"-_tab2";var g=I+"-_tab3";v.byId(T).setVisible(false);v.byId(f).setVisible(false);v.byId(g).setVisible(false);},handleTabChange:function(e){var s=e.getSource().getId();var t=this.getView().byId(s).getSelectedKey();var f=this.oSmTableInnerTab1.getSelectedItems().length;var g=this.oSmTableInnerTab2.getSelectedItems().length;var h=this.oSmTableInnerTab3.getSelectedItems().length;var i=this.oSmTableInnerTab4.getSelectedItems().length;if(h>0||i>0){if(t==="_tab1"||t==="_tab2"){var T=this.oBundleText.getText("ToastMsgCCTR");sap.m.MessageToast.show(T,{duration:9999,width:"600%",my:"center bottom",at:"center bottom",of:window,offset:"0 0",collision:"fit fit",onClose:null,autoClose:true,animationTimingFunction:"ease",animationDuration:1000,closeOnBrowserNavigation:true});}}else if(f>0||g>0){if(t==="_tab3"||t==="_tab4"){var j=this.oBundleText.getText("ToastMsgHCTR");sap.m.MessageToast.show(j,{duration:9999,width:"600%",my:"center bottom",at:"center bottom",of:window,offset:"0 0",collision:"fit fit",onClose:null,autoClose:true,animationTimingFunction:"ease",animationDuration:1000,closeOnBrowserNavigation:true});}}},_onTable2RowSelection1:function(e){this.massEditEnableDisable();var s,i;var o=e.getParameter("listItem");var f=e.getParameter("listItems");var I=e.getParameter("selected");var g=e.getParameter("selectAll");var m=this.oSmTableInnerTab2.getModel();if(f.length>1){if(g){this.isSelectAllTab2=true;this.isInclusionTab2=false;this.isExclusionTab2=false;this.inclusionArrayTab2=[];this.exclusionArrayTab2=[];this.noneditCheckboxTab3Tab4();}else{this.isSelectAllTab2=false;this.isInclusionTab2=false;this.isExclusionTab2=false;this.inclusionArrayTab2=[];this.exclusionArrayTab2=[];this.editableCheckBoxTab3Tab4();}}else{if(I){s=m.getProperty("FormattedPurchaseContractItem",o.getBindingContext());if(this.exclusionArrayTab2.indexOf(s)>-1){i=this.exclusionArrayTab2.indexOf(s);this.exclusionArrayTab2.splice(i,1);if(this.exclusionArrayTab2.length===0){this.isSelectAllTab2=true;this.isInclusionTab2=false;this.isExclusionTab2=false;this.noneditCheckboxTab3Tab4();}}else{this.inclusionArrayTab2.push(s);this.isInclusionTab2=true;this.isExclusionTab2=false;this.noneditCheckboxTab3Tab4();}}else{s=m.getProperty("FormattedPurchaseContractItem",o.getBindingContext());if(this.inclusionArrayTab2.indexOf(s)>-1){i=this.inclusionArrayTab2.indexOf(s);this.inclusionArrayTab2.splice(i,1);if(this.inclusionArrayTab2.length===0){this.isSelectAllTab2=false;this.isInclusionTab2=false;this.isExclusionTab2=false;this.editableCheckBoxTab3Tab4();}}else{this.exclusionArrayTab2.push(s);this.isInclusionTab2=false;this.isExclusionTab2=true;this.isSelectAllTab2=false;this.noneditCheckboxTab3Tab4();}}}},_onTable1RowSelection1:function(e){this.massEditEnableDisable();var s,i;var o=e.getParameter("listItem");var f=e.getParameter("listItems");var I=e.getParameter("selected");var g=e.getParameter("selectAll");var m=this.oSmTableInnerTab1.getModel();if(f.length>1){if(g){this.isSelectAllTab1=true;this.isInclusionTab1=false;this.isExclusionTab1=false;this.inclusionArrayTab1=[];this.exclusionArrayTab1=[];this.noneditCheckboxTab3Tab4();}else{this.isSelectAllTab1=false;this.isInclusionTab1=false;this.isExclusionTab1=false;this.inclusionArrayTab1=[];this.exclusionArrayTab1=[];this.editableCheckBoxTab3Tab4();}}else{if(I){s=m.getProperty("ActivePurchasingDocument",o.getBindingContext());if(this.exclusionArrayTab1.indexOf(s)>-1){i=this.exclusionArrayTab1.indexOf(s);this.exclusionArrayTab1.splice(i,1);if(this.exclusionArrayTab1.length===0){this.isSelectAllTab1=true;this.isInclusionTab1=false;this.isExclusionTab1=false;this.noneditCheckboxTab3Tab4();}}else{this.inclusionArrayTab1.push(s);this.isInclusionTab1=true;this.isExclusionTab1=false;this.noneditCheckboxTab3Tab4();}}else{s=m.getProperty("ActivePurchasingDocument",o.getBindingContext());if(this.inclusionArrayTab1.indexOf(s)>-1){i=this.inclusionArrayTab1.indexOf(s);this.inclusionArrayTab1.splice(i,1);if(this.inclusionArrayTab1.length===0){this.isSelectAllTab1=false;this.isInclusionTab1=false;this.isExclusionTab1=false;this.editableCheckBoxTab3Tab4();}}else{this.exclusionArrayTab1.push(s);this.isInclusionTab1=false;this.isExclusionTab1=true;this.isSelectAllTab1=false;this.noneditCheckboxTab3Tab4();}}}},_onTable3RowSelection1:function(e){this.massEditEnableDisable();var s,i;var o=e.getParameter("listItem");var f=e.getParameter("listItems");var I=e.getParameter("selected");var g=e.getParameter("selectAll");var m=this.oSmTableInnerTab3.getModel();if(f.length>1){if(g){this.isSelectAllTab3=true;this.isInclusionTab3=false;this.isExclusionTab3=false;this.inclusionArrayTab3=[];this.exclusionArrayTab3=[];this.noneditCheckboxTab1Tab2();}else{this.isSelectAllTab3=false;this.isInclusionTab3=false;this.isExclusionTab3=false;this.inclusionArrayTab3=[];this.exclusionArrayTab3=[];this.editableCheckBoxTab1Tab2();}}else{if(I){s=m.getProperty("ActivePurchasingDocument",o.getBindingContext());if(this.exclusionArrayTab3.indexOf(s)>-1){i=this.exclusionArrayTab3.indexOf(s);this.exclusionArrayTab3.splice(i,1);if(this.exclusionArrayTab3.length===0){this.isSelectAllTab3=true;this.isInclusionTab3=false;this.isExclusionTab3=false;this.noneditCheckboxTab1Tab2();}}else{this.inclusionArrayTab3.push(s);this.isInclusionTab3=true;this.isExclusionTab3=false;this.noneditCheckboxTab1Tab2();}}else{s=m.getProperty("ActivePurchasingDocument",o.getBindingContext());if(this.inclusionArrayTab3.indexOf(s)>-1){i=this.inclusionArrayTab3.indexOf(s);this.inclusionArrayTab3.splice(i,1);if(this.inclusionArrayTab3.length===0){this.isSelectAllTab3=false;this.isInclusionTab3=false;this.isExclusionTab3=false;this.editableCheckBoxTab1Tab2();}}else{this.exclusionArrayTab3.push(s);this.isInclusionTab3=false;this.isExclusionTab3=true;this.isSelectAllTab3=false;this.noneditCheckboxTab1Tab2();}}}},_onTable4RowSelection1:function(e){this.massEditEnableDisable();var s,i;var o=e.getParameter("listItem");var f=e.getParameter("listItems");var I=e.getParameter("selected");var g=e.getParameter("selectAll");var m=this.oSmTableInnerTab4.getModel();if(f.length>1){if(g){this.isSelectAllTab4=true;this.isInclusionTab4=false;this.isExclusionTab4=false;this.inclusionArrayTab4=[];this.exclusionArrayTab4=[];this.noneditCheckboxTab1Tab2();}else{this.isSelectAllTab4=false;this.isInclusionTab4=false;this.isExclusionTab4=false;this.inclusionArrayTab4=[];this.exclusionArrayTab4=[];this.editableCheckBoxTab1Tab2();}}else{if(I){s=m.getProperty("FormattedPurchaseContractItem",o.getBindingContext());if(this.exclusionArrayTab4.indexOf(s)>-1){i=this.exclusionArrayTab4.indexOf(s);this.exclusionArrayTab4.splice(i,1);if(this.exclusionArrayTab4.length===0){this.isSelectAllTab4=true;this.isInclusionTab4=false;this.isExclusionTab4=false;this.noneditCheckboxTab1Tab2();}}else{this.inclusionArrayTab4.push(s);this.isInclusionTab4=true;this.isExclusionTab4=false;this.noneditCheckboxTab1Tab2();}}else{s=m.getProperty("FormattedPurchaseContractItem",o.getBindingContext());if(this.inclusionArrayTab4.indexOf(s)>-1){i=this.inclusionArrayTab4.indexOf(s);this.inclusionArrayTab4.splice(i,1);if(this.inclusionArrayTab4.length===0){this.isSelectAllTab4=false;this.isInclusionTab4=false;this.isExclusionTab4=false;this.editableCheckBoxTab1Tab2();}}else{this.exclusionArrayTab4.push(s);this.isInclusionTab4=false;this.isExclusionTab4=true;this.isSelectAllTab4=false;this.noneditCheckboxTab1Tab2();}}}},noneditCheckboxTab1Tab2:function(){var e=this.oSmTableInnerTab1.getItems();var f=this.oSmTableInnerTab2.getItems();var t="ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--responsiveTable-_tab1-sa";var g="ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--responsiveTable-_tab2-sa";this.oSmTableInnerTab1.removeSelections(true);this.oSmTableInnerTab2.removeSelections(true);var h;var k;h=e.length;k=f.length;if(h>0){for(var i in e){if(e[i].getMultiSelectControl()!==undefined){e[i].getMultiSelectControl().setEditable(false);}}}if(this.getView().byId(t)!==undefined){this.getView().byId(t).setEditable(false);}if(k>0){for(var j in f){if(f[j].getMultiSelectControl()!==undefined){f[j].getMultiSelectControl().setEditable(false);}}}if(this.getView().byId(g)!==undefined){this.getView().byId(g).setEditable(false);}},editableCheckBoxTab1Tab2:function(){var e=this.oSmTableInnerTab1.getItems();var f=this.oSmTableInnerTab2.getItems();for(var i in e){if(e[i].getMultiSelectControl()!==undefined){e[i].getMultiSelectControl().setEditable(true);}}var t="ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--responsiveTable-_tab1-sa";var g="ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--responsiveTable-_tab2-sa";if(this.getView().byId(t)!==undefined){this.getView().byId(t).setEditable(true);}for(var j in f){if(f[j].getMultiSelectControl()!==undefined){f[j].getMultiSelectControl().setEditable(true);}}if(this.getView().byId(g)!==undefined){this.getView().byId(g).setEditable(true);}},noneditCheckboxTab3Tab4:function(){var e=this.oSmTableInnerTab3.getItems();var f=this.oSmTableInnerTab4.getItems();var t="ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--responsiveTable-_tab3-sa";var g="ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--responsiveTable-_tab4-sa";this.oSmTableInnerTab3.removeSelections(true);this.oSmTableInnerTab4.removeSelections(true);var h;var k;h=e.length;k=f.length;if(h>0){for(var i in e){if(e[i].getMultiSelectControl()!==undefined){e[i].getMultiSelectControl().setEditable(false);}if(this.getView().byId(t)!==undefined){this.getView().byId(t).setEditable(false);}}}if(k>0){for(var j in f){if(f[j].getMultiSelectControl()!==undefined){f[j].getMultiSelectControl().setEditable(false);}if(this.getView().byId(g)!==undefined){this.getView().byId(g).setEditable(false);}}}},editableCheckBoxTab3Tab4:function(){var e=this.oSmTableInnerTab3.getItems();var f=this.oSmTableInnerTab4.getItems();for(var i in e){if(e[i].getMultiSelectControl()!==undefined){e[i].getMultiSelectControl().setEditable(true);}}var t="ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--responsiveTable-_tab3-sa";var g="ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--responsiveTable-_tab4-sa";if(this.getView().byId(t)!==undefined){this.getView().byId(t).setEditable(true);}for(var j in f){if(f[j].getMultiSelectControl()!==undefined){f[j].getMultiSelectControl().setEditable(true);}}if(this.getView().byId(g)!==undefined){this.getView().byId(g).setEditable(true);}},getTotalSelectedItemsCount:function(){var t,e,f,h,g;if(this.oSmTableInnerTab1){e=this.oSmTableInnerTab1.getSelectedItems().length;}if(this.oSmTableInnerTab2){f=this.oSmTableInnerTab2.getSelectedItems().length;}if(this.oSmTableInnerTab3){h=this.oSmTableInnerTab3.getSelectedItems().length;}if(this.oSmTableInnerTab4){g=this.oSmTableInnerTab4.getSelectedItems().length;}if(h+g>0){this.subObjectType='H';}else if(e+f>0){this.subObjectType='C';}if(e+h===0){sap.ui.getCore().byId("AddHdrDistBtn").setEnabled(false);}else{sap.ui.getCore().byId("AddHdrDistBtn").setEnabled(true);}if(f+g===0){sap.ui.getCore().byId("AddItmDistBtn").setEnabled(false);}else{sap.ui.getCore().byId("AddItmDistBtn").setEnabled(true);}t=e+f+h+g;if(t>0){sap.ui.getCore().byId("MassAdditionBtn").setEnabled(true);}else{sap.ui.getCore().byId("MassAdditionBtn").setEnabled(false);}return t;},_handleGrowing:function(e){var r=e.getParameter("reason");var g,f;var I,s,m,t;var h;if(r==="Growing"){s=e.getSource().getId();if(s==="ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--responsiveTable-_tab1"){h=this.getView().byId("ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--responsiveTable-_tab1-sa").getEditable();if(this.isSelectAllTab1){this.oSmTableInnerTab1.selectAll();}else if(this.isExclusionTab1){g=this.oSmTableInnerTab1.getGrowingThreshold();I=this.oSmTableInnerTab1.getItems();f=I.length;m=this.oSmTableInnerTab1.getModel();for(var i=f-g;i<f;i++){t=m.getProperty("ActivePurchasingDocument",I[i].getBindingContext());if(this.exclusionArrayTab1.indexOf(t)>-1){I[i].setSelected(false);}else{I[i].setSelected(true);}}}else if(h===false){this.noneditCheckboxTab1Tab2();}}else if(s==="ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--responsiveTable-_tab2"){h=this.getView().byId("ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--responsiveTable-_tab2-sa").getEditable();if(this.isSelectAllTab2){this.oSmTableInnerTab2.selectAll();}else if(this.isExclusionTab2){g=this.oSmTableInnerTab2.getGrowingThreshold();I=this.oSmTableInnerTab2.getItems();f=I.length;m=this.oSmTableInnerTab2.getModel();for(i=f-g;i<f;i++){t=m.getProperty("FormattedPurchaseContractItem",I[i].getBindingContext());if(this.exclusionArrayTab2.indexOf(t)>-1){I[i].setSelected(false);}else{I[i].setSelected(true);}}}else if(h===false){this.noneditCheckboxTab1Tab2();}}else if(s==="ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--responsiveTable-_tab3"){h=this.getView().byId("ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--responsiveTable-_tab3-sa").getEditable();if(this.isSelectAllTab3){this.oSmTableInnerTab3.selectAll();}else if(this.isExclusionTab3){g=this.oSmTableInnerTab3.getGrowingThreshold();I=this.oSmTableInnerTab3.getItems();f=I.length;m=this.oSmTableInnerTab3.getModel();for(i=f-g;i<f;i++){t=m.getProperty("ActivePurchasingDocument",I[i].getBindingContext());if(this.exclusionArrayTab3.indexOf(t)>-1){I[i].setSelected(false);}else{I[i].setSelected(true);}}}else if(h===false){this.noneditCheckboxTab3Tab4();}}else if(s==="ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--responsiveTable-_tab4"){h=this.getView().byId("ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--responsiveTable-_tab4-sa").getEditable();if(this.isSelectAllTab4){this.oSmTableInnerTab4.selectAll();}else if(this.isExclusionTab4){g=this.oSmTableInnerTab4.getGrowingThreshold();I=this.oSmTableInnerTab4.getItems();f=I.length;m=this.oSmTableInnerTab4.getModel();for(i=f-g;i<f;i++){t=m.getProperty("FormattedPurchaseContractItem",I[i].getBindingContext());if(this.exclusionArrayTab4.indexOf(t)>-1){I[i].setSelected(false);}else{I[i].setSelected(true);}}}else if(h===false){this.noneditCheckboxTab3Tab4();}}}else if(r==="Refresh"){s=e.getSource().getId();var j,k,l,n;if(s==="ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--responsiveTable-_tab1"){l=this.oSmTableInnerTab3.getSelectedItems().length;n=this.oSmTableInnerTab4.getSelectedItems().length;if(l>0||n>0){this.noneditCheckboxTab1Tab2();}}else if(s==="ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--responsiveTable-_tab2"){l=this.oSmTableInnerTab3.getSelectedItems().length;n=this.oSmTableInnerTab4.getSelectedItems().length;if(l>0||n>0){this.noneditCheckboxTab1Tab2();}}else if(s==="ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--responsiveTable-_tab3"){j=this.oSmTableInnerTab1.getSelectedItems().length;k=this.oSmTableInnerTab2.getSelectedItems().length;if(j>0||k>0){this.noneditCheckboxTab3Tab4();}}else if(s==="ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--responsiveTable-_tab4"){j=this.oSmTableInnerTab1.getSelectedItems().length;k=this.oSmTableInnerTab2.getSelectedItems().length;if(j>0||k>0){this.noneditCheckboxTab3Tab4();}}}},setAffectedDocumentsCount:function(){var s=this.getView().byId("SelectedCTRCount");var e=this.getView().byId("selectedCTRItemCount");var f=this.getView().byId("AffectedCTRCount");var g=this.getView().byId("AffectedCTRItemCount");var h=this.oSmTableInnerTab1.getGrowingInfo();var i=this.oSmTableInnerTab2.getGrowingInfo();var j=this.getView().byId("SelectedHCTRCount");var k=this.getView().byId("selectedHCTRItemCount");var l=this.oSmTableInnerTab3.getGrowingInfo();var m=this.oSmTableInnerTab4.getGrowingInfo();var n,o,p,q;n=0;o=0;p=0;q=0;if(s||f){if(this.isSelectAllTab1){n=h.total;}else if(this.isExclusionTab1){n=h.total-this.exclusionArrayTab1.length;}else if(this.isInclusionTab1){n=this.inclusionArrayTab1.length;}}if(e||g){if(this.isSelectAllTab2){o=i.total;}else if(this.isExclusionTab2){o=i.total-this.exclusionArrayTab2.length;}else if(this.isInclusionTab2){o=this.inclusionArrayTab2.length;}}if(j){if(this.isSelectAllTab3){p=l.total;}else if(this.isExclusionTab3){p=l.total-this.exclusionArrayTab3.length;}else if(this.isInclusionTab3){p=this.inclusionArrayTab3.length;}}if(k){if(this.isSelectAllTab4){q=m.total;}else if(this.isExclusionTab4){q=m.total-this.exclusionArrayTab4.length;}else if(this.isInclusionTab4){q=this.inclusionArrayTab4.length;}}if(s&&s!==null&&s!==undefined){s.setText(n);}else if(f&&f!==null&&f!==undefined){f.setText(n);}if(e&&e!==null&&e!==undefined){e.setText(o);}else if(g&&g!==null&&g!==undefined){g.setText(o);}if(j&&j!==null&&j!==undefined){j.setText(p);}if(k&&k!==null&&k!==undefined){k.setText(q);}},onClickApplicationJob:function(e){var p={"JobCatalogEntryName":"SAP_MM_PUR_MASSCCTRBG_J"};var n=this.extensionAPI.getNavigationController();n.navigateExternal("CtrApplicationJob",p);},clearInclusionExclusionVars:function(){this.isSelectAllTab1=false;this.isExclusionTab1=false;this.isInclusionTab1=false;this.exclusionArrayTab1=[];this.inclusionArrayTab1=[];this.isSelectAllTab2=false;this.isExclusionTab2=false;this.isInclusionTab2=false;this.exclusionArrayTab2=[];this.inclusionArrayTab2=[];this.isSelectAllTab3=false;this.isExclusionTab3=false;this.isInclusionTab3=false;this.exclusionArrayTab3=[];this.inclusionArrayTab3=[];this.isSelectAllTab4=false;this.isExclusionTab4=false;this.isInclusionTab4=false;this.exclusionArrayTab4=[];this.inclusionArrayTab4=[];},applyChanges:function(C,e,f){var v=this.getView();var p={};this.MandateFieldChanged=[];this.ValueStateErrorFields=[];this.applychangesIndicator="";this.DocumentCategory="";this.nonMandateFieldChanged=[];var t=this;var r,g,h,i,P;var j,k,l,m;var u="/C_PurCntrlContrItmMassUpdt";var n=[];var o={};var q,s,w,x;n=t.getView().byId("listReportFilter").getFilters();t.getOwnerComponent().getModel().setUseBatch(true);var B=t.getView().getModel("@i18n").getResourceBundle();t.getOwnerComponent().getModel().setDeferredGroups(["DEFAULT"]);if(e.getId()==="ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--MassEditForm"){if(this.isSimulation===true){this.setViewModelHeader(" ","X");}else{this.setViewModelHeader(" "," ");}this.applychangesIndicator="ME";o=t.getMassEditChangedFields("MassEditForm-item--Form");p=t._filterPoEntryValues(o);g=t.oSmTableInnerTab2.getSelectedContexts();if(g.length!==0){i=g[0];q=t.getView().getModel().getProperty("CentralPurchaseContract",i);s=t.getView().getModel().getProperty("CentralPurchaseContractItem",i);}else{r=t.oSmTableInnerTab1.getSelectedContexts();h=r[0];q=t.getView().getModel().getProperty("CentralPurchaseContract",h);s="00010";}P="/C_PurCntrlContrItmMassUpdt(CentralPurchaseContract='"+q+"',CentralPurchaseContractItem='"+s+"')";}else if(e.getId()==="ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--HrMassEditForm"){if(this.isSimulation===true){this.setViewModelHeader(" ","X");}else{this.setViewModelHeader(" "," ");}this.applychangesIndicator="HME";o=t.getMassEditChangedFields("HrMassEditForm-item--Form");p=t._filterPoEntryValues(o);k=t.oSmTableInnerTab4.getSelectedContexts();if(k.length!==0){m=k[0];q=t.getView().getModel().getProperty("CentralPurchaseContract",m);s=t.getView().getModel().getProperty("CentralPurchaseContractItem",m);}else{j=t.oSmTableInnerTab3.getSelectedContexts();l=j[0];q=t.getView().getModel().getProperty("CentralPurchaseContract",l);s="00010";}P="/C_CntrlPurContrHierItmMassUpdt(CentralPurchaseContract='"+q+"',CentralPurchaseContractItem='"+s+"')";u="/C_CntrlPurContrHierItmMassUpdt";}else if((e.getSource().getId()==="updateJobConfirmationBtn"||e.getSource().getId()==="simulateJobConfirmationBtn")&&f==="AddHeaderDistribution"){if(e.getSource().getId()==="updateJobConfirmationBtn"){this.setViewModelHeader("X"," ");}else if(e.getSource().getId()==="simulateJobConfirmationBtn"){this.setViewModelHeader("X","X");}this.applychangesIndicator="AH";p=t.getAddCCTRDistChangedFields("smartFormDistribution");r=t.oSmTableInnerTab1.getSelectedContexts();h=r[0];q=t.getView().getModel().getProperty("CentralPurchaseContract",h);w="0000";P="/C_CntrlPurContrHdrDistr(CentralPurchaseContract='"+q+"',DistributionKey='"+w+"')";}else if((e.getSource().getId()==="updateJobConfirmationBtn"||e.getSource().getId()==="simulateJobConfirmationBtn")&&f==="AddItemDistribution"){if(e.getSource().getId()==="updateJobConfirmationBtn"){this.setViewModelHeader("X"," ");}else if(e.getSource().getId()==="simulateJobConfirmationBtn"){this.setViewModelHeader("X","X");}this.applychangesIndicator="AI";p=t.getAddCCTRDistChangedFields("smartFormItemDistribution");g=t.oSmTableInnerTab2.getSelectedContexts();i=g[0];q=t.getView().getModel().getProperty("CentralPurchaseContract",i);s=t.getView().getModel().getProperty("CentralPurchaseContractItem",i);x="0000";P="/C_CntrlPurContrItmDistr(CentralPurchaseContract='"+q+"',CentralPurchaseContractItem='"+s+"',DistributionKey='"+x+"')";}else if((e.getSource().getId()==="updateJobConfirmationBtn"||e.getSource().getId()==="simulateJobConfirmationBtn")&&f==="AddHCTRItemDistribution"){if(e.getSource().getId()==="updateJobConfirmationBtn"){this.setViewModelHeader("X"," ");}else if(e.getSource().getId()==="simulateJobConfirmationBtn"){this.setViewModelHeader("X","X");}this.applychangesIndicator="AHI";u="/C_CntrlPurContrHierItmMassUpdt";p=t.getHCTRAddDistChangedFields("smartFormHCTRItemDistribution");k=t.oSmTableInnerTab4.getSelectedContexts();m=k[0];q=t.getView().getModel().getProperty("CentralPurchaseContract",m);s=t.getView().getModel().getProperty("CentralPurchaseContractItem",m);x="0000";P="/C_CPurConHierItmDistrMassUpdt(CentralPurchaseContract='"+q+"',CentralPurchaseContractItem='"+s+"',PurgDocItemDistributionKey='"+x+"')";}else if((e.getSource().getId()==="updateJobConfirmationBtn"||e.getSource().getId()==="simulateJobConfirmationBtn")&&f==="AddHCTRHeaderDistribution"){if(e.getSource().getId()==="updateJobConfirmationBtn"){this.setViewModelHeader("X"," ");}else if(e.getSource().getId()==="simulateJobConfirmationBtn"){this.setViewModelHeader("X","X");}this.applychangesIndicator="AHH";u="/C_CntrlPurContrHierItmMassUpdt";p=t.getHCTRAddDistChangedFields("smartFormHCTRHeaderDistribution");j=t.oSmTableInnerTab3.getSelectedContexts();l=j[0];q=t.getView().getModel().getProperty("CentralPurchaseContract",l);w="0000";P="/C_CPurConHierHdrDistrMassUpdt(CentralPurchaseContract='"+q+"',PurgDocItemDistributionKey='"+w+"')";}t.getOwnerComponent().getModel().read(u,{groupId:"DEFAULT",filters:n,urlParameters:{"$top":"1"}});p.InternalComment=C;p=t._preparePayloadAsPerScenario(p,this.applychangesIndicator);t.getOwnerComponent().getModel().update(P,p,{groupId:"DEFAULT",changeSetId:"myId"});t.getOwnerComponent().getModel().submitChanges({groupId:"DEFAULT",success:function(y){var z,D,G,H;D=y.__batchResponses[1].headers.job_id;if(D!==null&&D!==undefined){G=B.getText("jobDescription",[C]);H=B.getText("jobCreatedText",[C]);z=new sap.m.Text("sJobScheduledText",{text:H.replace(G,'"'+G+'"')});var I=new sap.m.Dialog({title:B.getText("success"),type:"Message",state:"Success",content:z,beginButton:new sap.m.Button({text:B.getText("viewJobButtonText"),press:function(){t.onClickMassChangeJobs(D);I.close();}}),endButton:new sap.m.Button({text:B.getText("closeButtonText"),press:function(){I.close();}}),afterClose:function(){I.destroy();}});sap.ui.core.BusyIndicator.hide();I.open();t.isTabChanged=false;t.resetTables(t);v.byId("ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--ActionC_CntrlPurContrHdrDistrbutton-_tab1").setEnabled(false);v.byId("ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--ActionC_CntrlPurContrItmDistrbutton-_tab2").setEnabled(false);}else{z=B.getText("jobFailedText");sap.ui.core.BusyIndicator.hide();a.error(z);}if(z===null||z===undefined){z=B.getText("jobFailedText");sap.ui.core.BusyIndicator.hide();a.error(z);}},error:function(y){var z=t.oBundleText.getText("errorOccured");sap.ui.core.BusyIndicator.hide();a.error(z);}});},_preparePayloadAsPerScenario:function(p,e){if(e==="ME"||e==="AH"){if(this.isSelectAllTab1){p.PurOrdHeadersAreSelected="X";}else if(this.isExclusionTab1){p.PurOrdHeadersAreSelected=" ";p.PurchasingDocExclusionList=this.exclusionArrayTab1.toString();}else if(this.isInclusionTab1){p.PurOrdHeadersAreSelected=" ";p.PurchasingDocInclusionList=this.inclusionArrayTab1.toString();}}if(e==="ME"||e==="AI"){if(this.isSelectAllTab2){p.PurOrdItemsAreSelected="X";}else if(this.isExclusionTab2){p.PurOrdItemsAreSelected=" ";if(p.PurchasingDocExclusionList!==undefined){p.PurchasingDocExclusionList=p.PurchasingDocExclusionList+","+this.exclusionArrayTab2.toString();}else{p.PurchasingDocExclusionList=this.exclusionArrayTab2.toString();}}else if(this.isInclusionTab2){p.PurOrdItemsAreSelected=" ";if(p.PurchasingDocInclusionList!==undefined){p.PurchasingDocInclusionList=p.PurchasingDocInclusionList+","+this.inclusionArrayTab2.toString();}else{p.PurchasingDocInclusionList=this.inclusionArrayTab2.toString();}}}if(e==="HME"||e==="AHH"){if(this.isSelectAllTab3){p.PurOrdHeadersAreSelected=true;}else if(this.isExclusionTab3){p.PurOrdHeadersAreSelected=false;p.PurchasingDocExclusionList=this.exclusionArrayTab3.toString();}else if(this.isInclusionTab3){p.PurOrdHeadersAreSelected=false;p.PurchasingDocInclusionList=this.inclusionArrayTab3.toString();}}if(e==="HME"||e==="AHI"){if(this.isSelectAllTab4){p.PurOrdItemsAreSelected=true;}else if(this.isExclusionTab4){p.PurOrdItemsAreSelected=false;if(p.PurchasingDocExclusionList!==undefined){p.PurchasingDocExclusionList=p.PurchasingDocExclusionList+","+this.exclusionArrayTab4.toString();}else{p.PurchasingDocExclusionList=this.exclusionArrayTab4.toString();}}else if(this.isInclusionTab4){p.PurOrdItemsAreSelected=false;if(p.PurchasingDocInclusionList!==undefined){p.PurchasingDocInclusionList=p.PurchasingDocInclusionList+","+this.inclusionArrayTab4.toString();}else{p.PurchasingDocInclusionList=this.inclusionArrayTab4.toString();}}}return p;},adaptNavigationParameterExtension:function(s,o){if(o.action==="manage"&&o.semanticObject==="CentralPurchaseContract"){var e=this.extensionAPI.getQuickVariantSelectionKey();s.getSelectOptionsPropertyNames().forEach(function(f){if(e==="_tab2"){if(f!=="ActivePurchasingDocument"&&f!=="CentralPurchaseContractItem"&&f!=="CentralPurchaseContract"){s.removeSelectOption(f);}}else if(e==="_tab1"){if(f!=="ActivePurchasingDocument"){s.removeSelectOption(f);}}});}},onListNavigationExtension:function(e,B,r){var f=this.extensionAPI.getQuickVariantSelectionKey();if(f==="_tab3"){var C=e.getSource().getBindingContext().getObject().CentralPurchaseContract;var v=window.location.href;var u=v.indexOf("#CentralPurchaseContract");var R=v.slice(0,u);var s="#CentralPurchaseContract-manage&/C_CntrlPurContrHierHdrTP";var D="(CentralPurchaseContract='"+C+"',DraftUUID=guid'00000000-0000-0000-0000-000000000000";var g="',IsActiveEntity=true)";R=(R+s+D+g);sap.m.URLHelper.redirect(R,false);}else if(f==="_tab4"){var h=e.getSource().getBindingContext().getObject().CentralPurchaseContract;var i=e.getSource().getBindingContext().getObject().CentralPurchaseContractItem;var j=window.location.href;var U=j.indexOf("#CentralPurchaseContract");var k=j.slice(0,U);var l="#CentralPurchaseContract-manage&/C_CntrlPurContrHierHdrTP";var m="(CentralPurchaseContract='"+h+"',DraftUUID=guid'00000000-0000-0000-0000-000000000000',IsActiveEntity=true)/to_CntrlPurchaseContractItemTP(CentralPurchaseContractItem='"+i+"',CentralPurchaseContract='"+h+"',DraftUUID=guid'00000000-0000-0000-0000-000000000000',IsActiveEntity=true)";k=(k+l+m);sap.m.URLHelper.redirect(k,false);}},onClickMassChangeJobs:function(j){var p={"JobCatalogEntryName":"SAP_MM_PUR_MASSCCTRBG_J"};var n=this.extensionAPI.getNavigationController();n.navigateExternal("CtrApplicationJob",p);},onBeforePopoverOpensForActivePurchasingDoc:function(e){this.parametersBeforePopOver=e.getParameters();var o=this.parametersBeforePopOver.semanticAttributes;var s=this.constructiongSemanticAttributesArrayForActivePurchasingDoc(o);this.parametersBeforePopOver.setSemanticAttributes(s);e.getParameters().open();this.oNavigationHandler.processBeforeSmartLinkPopoverOpens([this.parametersBeforePopOver]);},constructiongSemanticAttributesArrayForActivePurchasingDoc:function(o){for(var n in o){if(o.hasOwnProperty(n)){if(!(n==="ActivePurchasingDocument")){delete o[n];}}}return o;},constructiongSemanticAttributesArrayForFormattedCTRItem:function(o){for(var n in o){if(o.hasOwnProperty(n)){if(!(n==="ActivePurchasingDocument"||n==="CentralPurchaseContractItem"||n==="CentralPurchaseContract")){delete o[n];}}}return o;},onBeforePopoverOpensForFormattedCTRItem:function(e){this.parametersBeforePopOver=e.getParameters();var o=this.parametersBeforePopOver.semanticAttributes;this.parametersBeforePopOver.semanticAttributes.ActivePurchasingDocument=this.parametersBeforePopOver.semanticAttributes.FormattedPurchaseContractItem.split("/")[0];this.parametersBeforePopOver.semanticAttributes.CentralPurchaseContractItem=this.parametersBeforePopOver.semanticAttributes.FormattedPurchaseContractItem.split("/")[1];this.parametersBeforePopOver.semanticAttributes.CentralPurchaseContract=this.parametersBeforePopOver.semanticAttributes.CentralPurchaseContract;var s=this.constructiongSemanticAttributesArrayForFormattedCTRItem(o);this.parametersBeforePopOver.setSemanticAttributes(s);e.getParameters().open();this.oNavigationHandler.processBeforeSmartLinkPopoverOpens([this.parametersBeforePopOver]);},massEditScrollToTop:function(){var D=document.getElementById("ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--affectedDocsVbox");D.scrollIntoView(true);},massEditEnableDisable:function(){var e;var t=this.getTotalSelectedItemsCount();e=this.getView().byId("ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--action::ActionC_PurCntrlContrItmMassUpdt1button");if(t===0){e.setEnabled(false);e.setType("Transparent");}else{e.setEnabled(true);e.setType("Emphasized");}},OnClickMassEdit:function(e){if((this.oSmTableInnerTab1.isAllSelectableSelected()||this.oSmTableInnerTab1.getSelectedItems().length>0)){sap.ui.core.BusyIndicator.show(5);this.countHeaderdistribution(e);}else if(this.oSmTableInnerTab2.isAllSelectableSelected()||this.oSmTableInnerTab2.getSelectedItems().length>0){sap.ui.core.BusyIndicator.show(5);this.countItemdistribution(e);}else{this.openMassEditDialog(e);}},openMassEditDialog:function(e){var v=this.getView();var m;var C=this.oSmTableInnerTab1.getSelectedItems().length+this.oSmTableInnerTab2.getSelectedItems().length;if(C!==0){m=v.byId("MassEditForm");if(!m){m=sap.ui.xmlfragment(v.getId(),"ui.s2p.mm.cntrl.ctrmass.update.ext.fragment.MassEditForm",this);v.addDependent(m);this.getOwnerComponent().getModel().metadataLoaded().then(this.onMetadataLoadedOfSetNewValueHeaderModel.bind(this,m));this.enableSimulationFeature();}}else{m=v.byId("HrMassEditForm");if(!m){m=sap.ui.xmlfragment(v.getId(),"ui.s2p.mm.cntrl.ctrmass.update.ext.fragment.HrMassEditForm",this);v.addDependent(m);this.getOwnerComponent().getModel().metadataLoaded().then(this.onMetadataLoadedOfSetNewValueHeaderModel.bind(this,m));var H="X";}}this.massEditChangeFields=[];m.setEscapeHandler(this.onPressEcsButton.bind(this));this.setAffectedDocumentsCount();var s;if(H==="X"){s=this.getView().byId("HrMassEditForm-item");}else{s=this.getView().byId("MassEditForm-item");}var i="CentralPurchaseContract,CentralPurchaseContractItem,FormattedPurchaseContractItem,ActivePurchasingDocument,";i+="PurchaseContractType,PurchasingDocumentTypeName,ProductType,ProductTypeName,MaterialGroup";i+="MaterialGroupName,Material,OrderQuantityUnit,ContractNetPriceAmount,DocumentCurrency,NetPriceQuantity,";i+="OrderPriceUnit,CntrlPurContrItmTargetAmount,SupplierConfControlKeyName,DomainText,ShippingInstructionName,";i+="PurchasingOrganization,PurchasingOrganizationName,PurchasingGroupName,CompanyCode,";i+="CompanyCodeName,Supplier,SupplierName,ValidityStartDate,Currency,CurrencyName,PurchasingProcessingStatus,PurchasingDocumentStatus,";i+="ItemDistributionStatusName,CreatedByUser,UserDescription,CreationDate,IsEndOfPurposeBlocked,PaymentTermsName,IncotermsClassificationName,";i+="IncotermsVersionName,ProcmtHubPurchasingOrg,ProcmtHubCompanyCode,ProcmtHubPurchasingGroup,Plant,ReleaseDateTime,InternalComment,";i+="PurchasingDocInclusionList,PurchasingDocExclusionList,PurOrdItemsAreSelected,PurOrdHeadersAreSelected,CntrlPurContrFlxblDistrIsAllwd";var h="ValidityEndDate,PurchaseContractTargetAmount,PaymentTerms,CashDiscount1Days,CashDiscount1Percent,CashDiscount2Days,CashDiscount2Percent,";h+="NetPaymentDays,IncotermsClassification,IncotermsLocation1,IncotermsLocation2,IncotermsVersion,PurchasingGroup,QuotationSubmissionDate,SupplierQuotation,";h+="CorrespncExternalReference,CorrespncInternalReference,SupplierRespSalesPersonName,SupplierPhoneNumber,CntrlPurContrDistributionPct";var I="MaterialDescription,TargetQuantity,PurgDocReleaseOrderQuantity,NoDaysReminder1,NoDaysReminder2,NoDaysReminder3,SupplierConfirmationControlKey,";I+="PurgDocOrderAcknNumber,RequirementTracking,SupplierMaterialNumber,IsOrderAcknRqd,PurgDocEstimatedPrice,PurchasingPriceIsEstimated,PriceIsToBePrinted,";I+="UnderdelivTolrtdLmtRatioInPct,OverdelivTolrtdLmtRatioInPct,UnlimitedOverdeliveryIsAllowed,StockType,TaxCode,ShippingInstruction,IsInfoAtRegistration,";I+="GoodsReceiptIsExpected,GoodsReceiptIsNonValuated,InvoiceIsExpected,InvoiceIsGoodsReceiptBased,EvaldRcptSettlmtIsAllowed,CntrlPurContrItmDistrPct";var f;var g;var j;if(!H){f="ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--listReport-_tab1";g="ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--listReport-_tab2";j="MassEditForm-item--Form";}else{f="ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--listReport-_tab3";g="ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--listReport-_tab4";j="HrMassEditForm-item--Form";}var o=this.getView().byId(f).getTable();var k=this.getView().byId(g).getTable();var l=this.getView().byId(j).getFormContainers()[0];var n=this.getView().byId(j).getFormContainers()[1];var p=this.getView().byId(j).getFormContainers()[2];var q=this.getView().byId(j).getFormContainers()[3];if(o.isAllSelectableSelected()||o.getSelectedItems().length>0){l.setVisible(true);n.setVisible(true);var r=this.countHeaderDist;var t=this.getView().byId("HeaderDistFieldcount");t.setText(r);s.setIgnoredFields(i+","+I);}if(k.isAllSelectableSelected()||k.getSelectedItems().length>0){p.setVisible(true);q.setVisible(true);var u=this.countItemDist;var w=this.getView().byId("ItemDistFieldcount");w.setText(u);s.setIgnoredFields(i+","+h);}m.setStretch(sap.ui.Device.system.phone);var P=this.getView().byId("PurgDocNoteTextFld-SmartField-input");P.addEventDelegate({onsapfocusleave:this.validatePurchaserNote.bind(this)});m.open();},countHeaderdistribution:function(e){var o=this.oSmFilter.getFilters();var g=e;var t=this;if(this.isInclusionTab1){for(var i in this.inclusionArrayTab1){o.push(new F("ActivePurchasingDocument","EQ",this.inclusionArrayTab1[i]));}}else if(this.isExclusionTab1){var f=new F({filters:[],and:true});for(var j in this.exclusionArrayTab1){f.aFilters.push(new F("ActivePurchasingDocument","NE",this.exclusionArrayTab1[j],true));}o.push(f);}var u="/C_CntrlPurContrHdrDistr";var h=this.getOwnerComponent().getModel();h.read(u,{filters:o,success:function(D){t.HeaderDistArray=D.results;t.countHeaderDist=D.results.length;t.countItemdistribution(g);},error:function(k){sap.ui.core.BusyIndicator.hide();}});},countItemdistribution:function(e){var t=this;var o=this.oSmFilter.getFilters();if(this.oSmTableInnerTab2.isAllSelectableSelected()||this.oSmTableInnerTab2.getSelectedItems().length>0){if(this.isInclusionTab2){for(var i in this.inclusionArrayTab2){o.push(new F("FormattedPurchaseContractItem","EQ",this.inclusionArrayTab2[i]));}}else if(this.isExclusionTab2){var f=new F({filters:[],and:true});for(var j in this.exclusionArrayTab2){f.aFilters.push(new F("FormattedPurchaseContractItem","NE",this.exclusionArrayTab2[j],true));}o.push(f);}var u="/C_CntrlPurContrItmDistr/$count";o.push(new F("ReferenceHeaderDistributionKey","EQ","0000"));var g=this.getOwnerComponent().getModel();g.read(u,{filters:o,success:function(D){t.countItemDist=D;sap.ui.core.BusyIndicator.hide();t.openMassEditDialog(e);},error:function(h){sap.ui.core.BusyIndicator.hide();}});}else{sap.ui.core.BusyIndicator.hide();this.openMassEditDialog(e);}},onPressEcsButton:function(e){this.onMassEditDialogClose();e.resolve();},resetTables:function(e){if(e===undefined||e.oSmTableTab1!==undefined||e.oSmTableTab2!==undefined||e.oSmTableTab3!==undefined||e.oSmTableTab4!==undefined){this.oSmTableInnerTab1.removeSelections(true);this.oSmTableInnerTab2.removeSelections(true);this.oSmTableInnerTab3.removeSelections(true);this.oSmTableInnerTab4.removeSelections(true);this.clearInclusionExclusionVars();this.editableCheckBoxTab1Tab2();this.editableCheckBoxTab3Tab4();}else if(e!==undefined&&e.getSource()===this.oSmTableTab1){this.oSmTableInnerTab1.removeSelections(true);this.isSelectAllTab1=false;this.isExclusionTab1=false;this.isInclusionTab1=false;this.exclusionArrayTab1=[];this.inclusionArrayTab1=[];}else if(e!==undefined&&e.getSource()===this.oSmTableTab2){this.oSmTableInnerTab2.removeSelections(true);this.isSelectAllTab2=false;this.isExclusionTab2=false;this.isInclusionTab2=false;this.exclusionArrayTab2=[];this.inclusionArrayTab2=[];}else if(e!==undefined&&e.getSource()===this.oSmTableTab3){this.oSmTableInnerTab3.removeSelections(true);this.isSelectAllTab3=false;this.isExclusionTab3=false;this.isInclusionTab3=false;this.exclusionArrayTab3=[];this.inclusionArrayTab3=[];}else if(e!==undefined&&e.getSource()===this.oSmTableTab4){this.oSmTableInnerTab4.removeSelections(true);this.isSelectAllTab4=false;this.isExclusionTab4=false;this.isInclusionTab4=false;this.exclusionArrayTab4=[];this.inclusionArrayTab4=[];}this.massEditEnableDisable();},fnCompareProperties:function(p,e){var f;var C;var g=this.oSmTableInnerTab3.getSelectedItems().length+this.oSmTableInnerTab4.getSelectedItems().length;if(g){C="C_CntrlPurContrHierItmMassUpdtType";}else{C="C_PurCntrlContrItmMassUpdtType";}for(var i=0;i<this.getView().getModel().getServiceMetadata().dataServices.schema[0].entityType.length;i++){if(this.getView().getModel().getServiceMetadata().dataServices.schema[0].entityType[i].name===C){for(var j=0;j<this.getView().getModel().getServiceMetadata().dataServices.schema[0].entityType[i].property.length;j++){f=this.getView().getModel().getServiceMetadata().dataServices.schema[0].entityType[i].property[j];if(p===f.name){if(e===null){if(f.type==="Edm.DateTime"){this.oProperties[p]=new Date(-18000000000000);}else if(f.type==="Edm.Decimal"){this.oProperties[p]="0.0";}else if(f.type==="Edm.Boolean"){this.oProperties[p]=false;}else{this.oProperties[p]=" ";}}else{if(f.type==="Edm.Decimal"){this.oProperties[p]=e.toString();}else{this.oProperties[p]=e;}}}}}}return this.oProperties;},onPressRestoreButton:function(e){this.resetSetNewValuesForm("MassEditForm-item--Form","MassEditForm");this.getView().byId("MassEditForm").getModel().resetChanges();},resetSetNewValuesForm:function(e,f){var g;var o;var h=this.getView().byId(e).getFormContainers();for(var i=0;i<h.length;i++){if(h[i].getVisible()===true){g=h[i].getFormElements();for(var j=0;j<g.length;j++){if(g[j].getVisible()===true){o=g[j].getFields()[0];if((j!==0||i!==1)&&(i!==3||j!==0)){o.setSelectedIndex(0);}}}}}this.getView().byId(f).getParent().byId("applyChangesButton").setEnabled(false);this.getView().byId(f).getParent().byId("restoreButton").setEnabled(false);},onPressCancelButton:function(e){var s=e.getSource().getParent().getId();if(s==="ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--MassEditForm"){this.onMassEditDialogClose("MassEditForm");}e.getSource().getParent().close();e.getSource().getParent().destroy();this.oHeaderDistributionFilters=[];this.oItemDistributionFilters=[];},onMassEditDialogClose:function(e){var C=this.getOwnerComponent();var s=C.getModel();var m=this.getView().byId(e).getContent()[1];var f=m.getContexts();var o=f[0];s.deleteCreatedEntry(o);},onCtrSmartFormCheck:function(e){var s=this.getView().byId("MassEditForm-item");var f=e.getParameter("id");var g=this.getNewChangedFieldPosition(this.massEditChangeFields,f);var h;if(e.getSource().getSelectedItem().getProperty("key")!=="keep"){if(g===undefined){h={fieldId:f};this.massEditChangeFields.push(h);}}else{if(g!==undefined){this.massEditChangeFields.splice(g,1);}}if(this.massEditChangeFields.length>0){this.getView().byId("MassEditForm").getParent().byId("restoreButton").setEnabled(true);if(this.getView().byId("PurgDocNoteTextFld-SmartField-input").getValue().length<=5000){this.getView().byId("MassEditForm").getParent().byId("applyChangesButton").setEnabled(true);this.getView().byId("MassEditForm").getParent().byId("simulateJobButton").setEnabled(true);}else{this.getView().byId("MassEditForm").getParent().byId("applyChangesButton").setEnabled(false);this.getView().byId("MassEditForm").getParent().byId("simulateJobButton").setEnabled(false);}}else{this.getView().byId("MassEditForm").getParent().byId("restoreButton").setEnabled(false);this.getView().byId("MassEditForm").getParent().byId("applyChangesButton").setEnabled(false);this.getView().byId("MassEditForm").getParent().byId("simulateJobButton").setEnabled(false);}},getNewChangedFieldPosition:function(m,f){var e,g;for(var p=0;p<m.length;p++){e=m[p];if(e.fieldId===f){g=p;break;}}return g;},_fnFindErrors:function(e){var t=this;var H=this.oSmTableInnerTab3.getSelectedItems().length+this.oSmTableInnerTab4.getSelectedItems().length;var D;var f;if(H){D=this.getView().byId("HrMassEditForm");f="HrMassEditForm-item--Form";}else{D=this.getView().byId("MassEditForm");f="MassEditForm-item--Form";}var g=this.getErrorFields(f);var h=e.concat(g);var j=h.filter(function(r,q){return h.indexOf(r)>=q;});var k=["MaterialDescription","TargetQuantity","PurgDocReleaseOrderQuantity","NoDaysReminder1","NoDaysReminder2","NoDaysReminder3","SupplierConfirmationControlKey","PurgDocOrderAcknNumber","RequirementTracking","SupplierMaterialNumber","IsOrderAcknRqd","PurgDocEstimatedPrice","PurchasingPriceIsEstimated","PriceIsToBePrinted","UnderdelivTolrtdLmtRatioInPct","OverdelivTolrtdLmtRatioInPct","UnlimitedOverdeliveryIsAllowed","StockType","TaxCode","ShippingInstruction","IsInfoAtRegistration","GoodsReceiptIsExpected","GoodsReceiptIsNonValuated","InvoiceIsExpected","InvoiceIsGoodsReceiptBased","EvaldRcptSettlmtIsAllowed","CntrlPurContrItmDistrPct"];var l=["ValidityEndDate","PurchaseContractTargetAmount","PaymentTerms","CashDiscount1Days","CashDiscount1Percent","CashDiscount2Days","CashDiscount2Percent","NetPaymentDays","IncotermsClassification","IncotermsLocation1","IncotermsLocation2","IncotermsVersion","QuotationSubmissionDate","SupplierQuotation","CorrespncExternalReference","CorrespncInternalReference","SupplierRespSalesPersonName","SupplierPhoneNumber","CntrlPurContrDistributionPct","PurchasingGroup"];var m;var I;if(H){m="ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--listReport-_tab3";I="ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--listReport-_tab4";}else{m="ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--listReport-_tab1";I="ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--listReport-_tab2";}var o=t.getView().byId(m).getTable();var n=t.getView().byId(I).getTable();var p=[],i;if(o.getSelectedItems().length===0){for(i=0;i<j.length;i++){var q=l.indexOf(j[i].getPropertyName());if(q===-1){p.push(j[i]);}}}else if(n.getSelectedItems().length===0){for(i=0;i<j.length;i++){q=k.indexOf(j[i].getPropertyName());if(q===-1){p.push(j[i]);}}}else if(o.getSelectedItems().length!==0&&n.getSelectedItems().length!==0){p=j;}if(p.length>0){t.onPressApplyChangesWithErroneousFields(p);}else{t.createApplyChangesPopUp(D);}},onPressApplyChangesButton:function(e){var m=this.getView().byId("MassEditForm").getContent()[1];var p=m.getErroneousFieldsAndTokens();var t=this;if(e.getSource().getId()==="ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--simulateJobButton"){this.isSimulation=true;}else{this.isSimulation=false;}p.then(function(f){t._fnFindErrors(f);},function(f){jQuery.sap.log.info("FYI:"+f);});},onPressApplyChangesWithErroneousFields:function(e){var f={};var g=[];var l,i;var t=this;for(i=0;i<e.length;i++){l=e[i].getLabel().getProperty("text");f={"title":t.oBundleText.getText("InvalidEntry",[l])};g.push(f);}var m=new sap.m.MessageItem({type:"Error",title:"{title}"});var o=new sap.ui.model.json.JSONModel();o.setData(g);var h=new sap.m.MessageView({showDetailsPageHeader:false,items:{path:"/",template:m}});h.setModel(o);t.oDialog=new sap.m.Dialog({resizable:true,content:h,state:"Error",beginButton:new sap.m.Button({press:function(){this.getParent().close();},text:"Close"}),customHeader:new sap.m.Bar({contentMiddle:[new sap.m.Text({text:t.oBundleText.getText("Error")})]}),contentHeight:"300px",contentWidth:"500px",verticalScrolling:false});t.oDialog.open();},getErrorFields:function(e){var f=this.getView().byId(e).getFormContainers();var g=[];var h=["PurchaseContractTargetAmount","PaymentTerms","PurchasingGroup","CashDiscount1Days","CashDiscount1Percent","CashDiscount2Days","CashDiscount2Percent","NetPaymentDays","CntrlPurContrDistributionPct","TargetQuantity","PurgDocReleaseOrderQuantity","NoDaysReminder1","NoDaysReminder2","NoDaysReminder3","PurgDocOrderAcknNumber","RequirementTracking","SupplierMaterialNumber","UnderdelivTolrtdLmtRatioInPct","OverdelivTolrtdLmtRatioInPct","CntrlPurContrItmDistrPct"];var k,o,l;for(var i=0;i<f.length;i++){if(f[i].getVisible()===true){k=f[i].getFormElements();for(var j=0;j<k.length;j++){if((j!==0||i!==1)&&(i!==3||j!==0)){if(k[j].getVisible()===true){o=k[j].getFields()[0];l=o.getSelectedItem().getKey();if(l==="new"){if(h.indexOf(o.getSmartField().getDataProperty().typePath)!==-1){if(o.getSmartField().getValue().indexOf("-")===0){o.getSmartField().setValueState(sap.ui.core.ValueState.Error);g.push(o);}}if(o.getSmartField().getValue()===""||!o.getSmartField().getValue()){o.getSmartField().setValueState(sap.ui.core.ValueState.Error);g.push(o);}}}}}}}return g;},getMassEditChangedFields:function(e){var f;var o;var g={};var h=this.getView().byId(e).getFormContainers();for(var i=0;i<h.length;i++){f=h[i].getFormElements();for(var j=0;j<f.length;j++){if((j!==0||i!==1)&&(i!==3||j!==0)){o=f[j].getFields()[0];if(o.getSelectedItem()!==null){var k=o.getSelectedItem().getKey();var n,v;if(k!=="keep"){if(k==="blank"){n=o.getPropertyName();v=null;}else if(k==="new"){n=o.getPropertyName();if(o.getDataType()==="Edm.Decimal"){v=o.getRawValue()[n].toString();}else{v=o.getRawValue()[n];}if(o.isComposite()===true&&o.getUnitOfMeasure()!==""){g[o.getUnitOfMeasurePropertyName()]=o.getUnitOfMeasure();}}else if(k==="true"){n=o.getPropertyName();v=true;}else if(k==="false"){n=o.getPropertyName();v=false;}g[n]=v;}}}}}return g;},_filterPoEntryValues:function(n){this.oProperties={};var p,e={},t=this;$.each(n,function(f,g){e=t.fnCompareProperties(f,g,p);});return e;},getAddCCTRDistChangedFields:function(s){var e={};this.MandateFieldChanged=[];this.ValueStateErrorFields=[];this.nonMandateFieldChanged=[];this.DocumentCategory="";var P=this.byId(s).getGroups()[0].getGroupElements()[0].getElements()[0].getBindingInfo("value").parts[0].path;var f=this.byId(s).getGroups()[0].getGroupElements()[0].getElements()[0].getProperty("value");e[P]=f;var g=this.byId(s).getGroups()[0].getGroupElements()[1].getElements()[0].getBindingInfo("value").parts[0].path;var h=this.byId(s).getGroups()[0].getGroupElements()[1].getElements()[0].getProperty("value");e[g]=h;var i=this.byId(s).getGroups()[0].getGroupElements()[2].getElements()[0].getBindingInfo("value").parts[0].path;var j=this.byId(s).getGroups()[0].getGroupElements()[2].getElements()[0].getProperty("value");e[i]=j;var k=this.byId(s).getGroups()[0].getGroupElements()[3].getElements()[0].getBindingInfo("value").parts[0].path;var l=this.byId(s).getGroups()[0].getGroupElements()[3].getElements()[0].getProperty("value");e[k]=l;var m=this.byId(s).getGroups()[0].getGroupElements()[4].getElements()[0].getBindingInfo("value").parts[0].path;var n=this.byId(s).getGroups()[0].getGroupElements()[4].getElements()[0].getProperty("value");e[m]=n;var o=this.byId(s).getGroups()[0].getGroupElements()[5].getElements()[0].getBindingInfo("value").parts[0].path;var p=this.byId(s).getGroups()[0].getGroupElements()[5].getElements()[0].getProperty("value");e[o]=p;var q=this.byId(s).getGroups()[1].getGroupElements()[0].getElements()[0].getBindingInfo("value").parts[0].path;var r=this.byId(s).getGroups()[1].getGroupElements()[0].getElements()[0].getProperty("value");e[q]=r;var C=this.byId(s).getGroups()[1].getGroupElements()[1].getElements()[0].getBindingInfo("value").parts[0].path;var t=this.byId(s).getGroups()[1].getGroupElements()[1].getElements()[0].getProperty("value");e[C]=t;var u=this.byId(s).getGroups()[1].getGroupElements()[2].getElements()[0].getBindingInfo("value").parts[0].path;var v=this.byId(s).getGroups()[1].getGroupElements()[2].getElements()[0].getProperty("value");e[u]=v;var w=this.byId(s).getGroups()[1].getGroupElements()[3].getElements()[0].getBindingInfo("value").parts[0].path;var x=this.byId(s).getGroups()[1].getGroupElements()[3].getElements()[0].getProperty("value");e[w]=x;var y=this.byId(s).getGroups()[1].getGroupElements()[4].getElements()[0].getBindingInfo("value").parts[0].path;var z=this.byId(s).getGroups()[1].getGroupElements()[4].getElements()[0].getProperty("value");e[y]=z;var B=this.byId(s).getGroups()[1].getGroupElements()[5].getElements()[0].getBindingInfo("value").parts[0].path;var D=this.byId(s).getGroups()[1].getGroupElements()[5].getElements()[0].getProperty("value");e[B]=D;var G=this.byId(s).getGroups()[1].getGroupElements()[6].getElements()[0].getBindingInfo("value").parts[0].path;var H=this.byId(s).getGroups()[1].getGroupElements()[6].getElements()[0].getProperty("value");e[G]=H;return e;},getHCTRAddDistChangedFields:function(s){var e={};this.MandateFieldChanged=[];this.ValueStateErrorFields=[];this.nonMandateFieldChanged=[];this.DocumentCategory="";var P=this.byId(s).getGroups()[0].getGroupElements()[0].getElements()[0].getBindingInfo("value").parts[0].path;var f=this.byId(s).getGroups()[0].getGroupElements()[0].getElements()[0].getProperty("value");e[P]=f;var g=this.byId(s).getGroups()[0].getGroupElements()[1].getElements()[0].getBindingInfo("value").parts[0].path;var h=this.byId(s).getGroups()[0].getGroupElements()[1].getElements()[0].getProperty("value");e[g]=h;var i=this.byId(s).getGroups()[0].getGroupElements()[2].getElements()[0].getBindingInfo("value").parts[0].path;var j=this.byId(s).getGroups()[0].getGroupElements()[2].getElements()[0].getProperty("value");e[i]=j;var k=this.byId(s).getGroups()[0].getGroupElements()[3].getElements()[0].getBindingInfo("value").parts[0].path;var l=this.byId(s).getGroups()[0].getGroupElements()[3].getElements()[0].getProperty("value");e[k]=l;var m=this.byId(s).getGroups()[0].getGroupElements()[4].getElements()[0].getBindingInfo("value").parts[0].path;var n=this.byId(s).getGroups()[0].getGroupElements()[4].getElements()[0].getProperty("value");e[m]=n;var o=this.byId(s).getGroups()[0].getGroupElements()[5].getElements()[0].getBindingInfo("value").parts[0].path;var p=this.byId(s).getGroups()[0].getGroupElements()[5].getElements()[0].getProperty("value");e[o]=p;var q=this.byId(s).getGroups()[0].getGroupElements()[6].getElements()[0].getBindingInfo("value").parts[0].path;var r=this.byId(s).getGroups()[0].getGroupElements()[6].getElements()[0].getProperty("value");e[q]=r;var t=this.byId(s).getGroups()[1].getGroupElements()[0].getElements()[0].getBindingInfo("value").parts[0].path;var u=this.byId(s).getGroups()[1].getGroupElements()[0].getElements()[0].getProperty("value");e[t]=u;var C=this.byId(s).getGroups()[1].getGroupElements()[1].getElements()[0].getBindingInfo("value").parts[0].path;var v=this.byId(s).getGroups()[1].getGroupElements()[1].getElements()[0].getProperty("value");e[C]=v;var w=this.byId(s).getGroups()[1].getGroupElements()[2].getElements()[0].getBindingInfo("value").parts[0].path;var x=this.byId(s).getGroups()[1].getGroupElements()[2].getElements()[0].getProperty("value");e[w]=x;var y=this.byId(s).getGroups()[1].getGroupElements()[3].getElements()[0].getBindingInfo("value").parts[0].path;var z=this.byId(s).getGroups()[1].getGroupElements()[3].getElements()[0].getProperty("value");e[y]=z;var B=this.byId(s).getGroups()[1].getGroupElements()[4].getElements()[0].getBindingInfo("value").parts[0].path;var D=this.byId(s).getGroups()[1].getGroupElements()[4].getElements()[0].getProperty("value");e[B]=D;var G=this.byId(s).getGroups()[1].getGroupElements()[5].getElements()[0].getBindingInfo("value").parts[0].path;var H=this.byId(s).getGroups()[1].getGroupElements()[5].getElements()[0].getProperty("value");e[G]=H;var I=this.byId(s).getGroups()[1].getGroupElements()[6].getElements()[0].getBindingInfo("value").parts[0].path;var K=this.byId(s).getGroups()[1].getGroupElements()[6].getElements()[0].getProperty("value");e[I]=K;return e;},onMetadataLoadedOfSetNewValueHeaderModel:function(s){var C=this.getOwnerComponent();var o=C.getModel();var m;if((s&&s.getId()==="ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--MassEditForm")){m=o.createEntry("/C_PurCntrlContrItmMassUpdt",{groupId:"changes"});s.getContent()[1].setContexts([m]);}else if((s&&s.getId()==="ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--HrMassEditForm")){m=o.createEntry("/C_CntrlPurContrHierItmMassUpdt",{groupId:"changes"});s.getContent()[1].setContexts([m]);}else if(s&&s.getId()==="ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--AddHeaderDistribution"){m=o.createEntry("/C_CntrlPurContrHdrDistr",{groupId:"changes"});s.setBindingContext(m);this.getView().byId("CntrlPurContrDistributionPct").setValue(parseFloat(Number(0)).toFixed(3));this.getView().byId("CntrlPurContrDistributionPct").setValueState("None");}else if(s&&s.getId()==="ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--AddItemDistribution"){m=o.createEntry("/C_CntrlPurContrItmDistr",{groupId:"changes"});s.setBindingContext(m);this.getView().byId("CntrlPurContrDistributionPct").setValue(parseFloat(Number(0)).toFixed(3));this.getView().byId("CntrlPurContrDistributionPct").setValueState("None");}else if(s&&s.getId()==="ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--AddHCTRItemDistribution"){m=o.createEntry("/C_CPurConHierItmDistrMassUpdt",{groupId:"changes"});s.setBindingContext(m);this.getView().byId("CntrlPurContrDistributionPct").setValue(parseFloat(Number(0)).toFixed(3));this.getView().byId("CntrlPurContrDistributionPct").setValueState("None");}else if(s&&s.getId()==="ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--AddHCTRHeaderDistribution"){m=o.createEntry("/C_CPurConHierHdrDistrMassUpdt",{groupId:"changes"});s.setBindingContext(m);this.getView().byId("CntrlPurContrDistributionPct").setValue(parseFloat(Number(0)).toFixed(3));this.getView().byId("CntrlPurContrDistributionPct").setValueState("None");}},onItemDistributionLinkPress:function(e){var o=this.extensionAPI;var n=o.getNavigationController();this.passSelectedItemKeysToCanvasPage();var i=this.itemKeys;n.navigateInternal(i,{routeName:"to_DetailItem"});},onHierItemDistributionLinkPress:function(e){var o=this.extensionAPI;var n=o.getNavigationController();this.passSelectedHierItemKeysToCanvasPage();var i=this.itemKeys;n.navigateInternal(i,{routeName:"to_DetailHierItem"});},onHeaderDistributionLinkPress:function(e){var o=this.extensionAPI;var n=o.getNavigationController();this.passSelectedHeaderKeysToCanvasPage();var i=this.itemKeys;n.navigateInternal(i,{routeName:"to_Detail"});},onHierHeaderDistributionLinkPress:function(e){var o=this.extensionAPI;var n=o.getNavigationController();this.passSelectedHierHeaderKeysToCanvasPage();var i=this.itemKeys;n.navigateInternal(i,{routeName:"to_HierHeadDistr"});},passSelectedHeaderKeysToCanvasPage:function(){this.aFilter=[];this.itemKeys="";this.strFilter="";var s=[];if(this.isInclusionTab1){s=this.inclusionArrayTab1;this.itemKeys="EQ";}else if(this.isExclusionTab1){s=this.exclusionArrayTab1;this.itemKeys="NE";}else if(this.isSelectAllTab1){s="";this.itemKeys="X";}var e;this.oPGIBindingContextKeys=[];this.itemKeys=this.itemKeys.concat("*");this.itemKeys=this.itemKeys.concat(s.length);for(var i=0;i<s.length;i++){e=s[i];if(this.itemKeys===""){this.itemKeys=e;}else if(this.itemKeys!==""&&e!==undefined){this.itemKeys=this.itemKeys.concat("*");this.itemKeys=this.itemKeys.concat(e);}}if(!this.isInclusionTab1){var D=this.getView().byId("listReportFilter").getFilters();if(D.length>0){this.strFilter=JSON.stringify(D);this.itemKeys=this.itemKeys.concat("*");this.itemKeys=this.itemKeys.concat(this.strFilter);}}},passSelectedHierHeaderKeysToCanvasPage:function(){this.aFilter=[];this.itemKeys="";this.strFilter="";var s=[];if(this.isInclusionTab3){s=this.inclusionArrayTab3;this.itemKeys="EQ";}else if(this.isExclusionTab3){s=this.exclusionArrayTab3;this.itemKeys="NE";}else if(this.isSelectAllTab3){s="";this.itemKeys="X";}var e;this.oPGIBindingContextKeys=[];this.itemKeys=this.itemKeys.concat("*");this.itemKeys=this.itemKeys.concat(s.length);for(var i=0;i<s.length;i++){e=s[i];if(this.itemKeys===""){this.itemKeys=e;}else if(this.itemKeys!==""&&e!==undefined){this.itemKeys=this.itemKeys.concat("*");this.itemKeys=this.itemKeys.concat(e);}}if(!this.isInclusionTab3){var D=this.getView().byId("listReportFilter").getFilters();if(D.length>0){this.strFilter=JSON.stringify(D);this.itemKeys=this.itemKeys.concat("*");this.itemKeys=this.itemKeys.concat(this.strFilter);}}},passSelectedItemKeysToCanvasPage:function(){this.aFilter=[];this.itemKeys="";this.strFilter="";var s=[];if(this.isInclusionTab2){s=this.inclusionArrayTab2;this.itemKeys="EQ";}else if(this.isExclusionTab2){s=this.exclusionArrayTab2;this.itemKeys="NE";}else if(this.isSelectAllTab2){s="";this.itemKeys="X";}var e;this.oPGIBindingContextKeys=[];this.itemKeys=this.itemKeys.concat("*");this.itemKeys=this.itemKeys.concat(s.length);for(var i=0;i<s.length;i++){e=s[i];if(this.itemKeys===""){this.itemKeys=e;}else if(this.itemKeys!==""&&e!==undefined){this.itemKeys=this.itemKeys.concat("*");this.itemKeys=this.itemKeys.concat(e);}}if(!this.isInclusionTab2){var D=this.getView().byId("listReportFilter").getFilters();if(D.length>0){this.strFilter=JSON.stringify(D);this.itemKeys=this.itemKeys.concat("*");this.itemKeys=this.itemKeys.concat(this.strFilter);}}this.itemKeys=this.itemKeys.replace(/\//g,"#");},passSelectedHierItemKeysToCanvasPage:function(){this.aFilter=[];this.itemKeys="";this.strFilter="";var s=[];if(this.isInclusionTab4){s=this.inclusionArrayTab4;this.itemKeys="EQ";}else if(this.isExclusionTab4){s=this.exclusionArrayTab4;this.itemKeys="NE";}else if(this.isSelectAllTab4){s="";this.itemKeys="X";}var e;this.oPGIBindingContextKeys=[];this.itemKeys=this.itemKeys.concat("*");this.itemKeys=this.itemKeys.concat(s.length);for(var i=0;i<s.length;i++){e=s[i];if(this.itemKeys===""){this.itemKeys=e;}else if(this.itemKeys!==""&&e!==undefined){this.itemKeys=this.itemKeys.concat("*");this.itemKeys=this.itemKeys.concat(e);}}if(!this.isInclusionTab4){var D=this.getView().byId("listReportFilter").getFilters();if(D.length>0){this.strFilter=JSON.stringify(D);this.itemKeys=this.itemKeys.concat("*");this.itemKeys=this.itemKeys.concat(this.strFilter);}}this.itemKeys=this.itemKeys.replace(/\//g,"#");},OnPressHierCentralLink:function(e){var C=e.getSource().getBindingContext().getObject().CentralPurchaseContract;var v=window.location.href;var u=v.indexOf("#CentralPurchaseContract");var r=v.slice(0,u);var s="#CentralPurchaseContract-manage&/C_CntrlPurContrHierHdrTP";var D="(CentralPurchaseContract='"+C+"',DraftUUID=guid'00000000-0000-0000-0000-000000000000";var f="',IsActiveEntity=true)";r=(r+s+D+f);sap.m.URLHelper.redirect(r,false);},OnPressHierCentralItemLink:function(e){var C=e.getSource().getBindingContext().getObject().CentralPurchaseContract;var v=e.getSource().getBindingContext().getObject().CentralPurchaseContractItem;var f=window.location.href;var u=f.indexOf("#CentralPurchaseContract");var r=f.slice(0,u);var s="#CentralPurchaseContract-manage&/C_CntrlPurContrHierHdrTP";var D="(CentralPurchaseContract='"+C+"',DraftUUID=guid'00000000-0000-0000-0000-000000000000',IsActiveEntity=true)/to_CntrlPurchaseContractItemTP(CentralPurchaseContractItem='"+v+"',CentralPurchaseContract='"+C+"',DraftUUID=guid'00000000-0000-0000-0000-000000000000',IsActiveEntity=true)";r=(r+s+D);sap.m.URLHelper.redirect(r,false);},onPressHCTRRestoreButton:function(e){this.resetSetNewValuesForm("HrMassEditForm-item--Form","HrMassEditForm");this.getView().byId("HrMassEditForm").getModel().resetChanges();},onPressHCTRCancelButton:function(e){var s=e.getSource().getParent().getId();if(s==="ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--HrMassEditForm"){this.onMassEditDialogClose("HrMassEditForm");}e.getSource().getParent().close();e.getSource().getParent().destroy();this.oHeaderDistributionFilters=[];this.oItemDistributionFilters=[];},onHCtrSmartFormCheck:function(e){var f=e.getParameter("id");var g=this.getNewChangedFieldPosition(this.massEditChangeFields,f);var h;if(e.getSource().getSelectedItem().getProperty("key")!=="keep"){if(g===undefined){h={fieldId:f};this.massEditChangeFields.push(h);}}else{if(g!==undefined){this.massEditChangeFields.splice(g,1);}}if(this.massEditChangeFields.length>0){this.getView().byId("HrMassEditForm").getParent().byId("restoreButton").setEnabled(true);if(this.getView().byId("PurgDocNoteTextFld-SmartField-input").getValue().length<=5000){this.getView().byId("HrMassEditForm").getParent().byId("applyChangesButton").setEnabled(true);this.getView().byId("HrMassEditForm").getParent().byId("simulateJobButton").setEnabled(true);}else{this.getView().byId("HrMassEditForm").getParent().byId("applyChangesButton").setEnabled(false);this.getView().byId("HrMassEditForm").getParent().byId("simulateJobButton").setEnabled(false);}}else{this.getView().byId("HrMassEditForm").getParent().byId("restoreButton").setEnabled(false);this.getView().byId("HrMassEditForm").getParent().byId("applyChangesButton").setEnabled(false);this.getView().byId("HrMassEditForm").getParent().byId("simulateJobButton").setEnabled(false);}},onPressHCTRApplyChangesButton:function(e){var m=this.getView().byId("HrMassEditForm").getContent()[1];var p=m.getErroneousFieldsAndTokens();var t=this;if(e.getSource().getId()==="ui.s2p.mm.cntrl.ctrmass.update::sap.suite.ui.generic.template.ListReport.view.ListReport::C_PurCntrlContrItmMassUpdt--simulateJobButton"){this.isSimulation=true;}else{this.isSimulation=false;}p.then(function(f){t._fnFindErrors(f);},function(f){jQuery.sap.log.info("FYI:"+f);});}});});
